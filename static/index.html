<html>
<head>
    <title>WS-Server</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            top: 0;
            left: 0;
            background: black;
        }

        #counter {
            color: white;
        }

        #loading-container {
            position: absolute;
            top: 1vh;
            left: 1vw;
            height: 98vh;
            width: 98vw;
            border: white;
            background: transparent;
        }

        #loading-bar {
            position: absolute;
            top: 1vh;
            left: 1vw;
            height: 98vh;
            width: 0;
            background: white;
        }
    </style>
    <script>
        function readAndDisplayAllTasks() {
            const serverURL = 'ws://127.0.0.1:9999/ws';
            const socket = new WebSocket(serverURL);

            socket.onopen = logOpenToConsole;
            socket.onclose = logCloseToConsole;
            socket.onmessage = readAndDisplayTask;
        }

        function readAndDisplayTask(event) {
            let values = event.data.split(" ")
            logTaskToConsole(values);
        }

        function logTaskToConsole(values) {
            let nt = values[0]
            let c = values[1]
            let d = values[2]
            document.getElementById("loading-bar").style.width = nt * 99 + "vw";
           // document.getElementById("counter").innerText = "normalized: " + nt + "cursor: " + c + "duration: " + d;
        }

        function logCloseToConsole() {
            console.log("Web socket connection closed");
        }

        function logOpenToConsole() {
            console.log("Web socket connection opened");
        }

        readAndDisplayAllTasks()
    </script>
</head>
<body>
<div id="loading-container"></div>
<div id="loading-bar"></div>
<p id="counter"></p>
</body>
</html>